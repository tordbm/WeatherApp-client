import{d as v,_ as k,r as _,o as l,c as i,a as s,w as E,b as m,v as p,e as r,f as g,g as f,F as M,h as V,i as N,u as c,n as L,j as q,k as x,t as P,l as A,m as B,p as I,q as D,s as R}from"./index-BEIQQFkN.js";import{_ as U,u as w,s as T,M as y,l as z,m as W,d as F,e as G,a as j}from"./ErrorToast.vue_vue_type_script_setup_true_lang-CRj0B7-p.js";const H="/WeatherApp-client/assets/partially-sunny-B0Tv6pHN.png",Z=v({components:{ContentLoader:U},setup(){return{store:w()}},data(){return{username:"",email:"",password:"",controlPassword:"",loading:!1}},computed:{passwordsMatch(){return this.password===this.controlPassword}},methods:{async signup(){if(!this.passwordsMatch){this.store.addError("Passwords do not match");return}try{this.loading=!0,await T(this.username,this.email,this.password)}catch{this.store.addError("Username or email already exists");return}finally{this.loading=!1}const e=this.$refs.signupModal;y.getInstance(e).hide(),this.$emit("signedUp",this.username,this.password)}}}),J={ref:"signupModal",class:"modal fade",tabindex:"-1","aria-labelledby":"signupModalLabel","aria-hidden":"true"},K={class:"modal-dialog"},O={class:"modal-content"},Q=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"signupModalLabel"},"Sign up"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),X={class:"modal-body"},Y={class:"mb-4 form-floating"},ss=s("label",{for:"username",class:"form-label"},"Username",-1),es={class:"mb-4 form-floating"},ts=s("label",{for:"email",class:"form-label"},"Email address",-1),os={class:"mb-4 form-floating"},as=s("label",{for:"password",class:"form-label"},"Password",-1),ns={class:"mb-4 form-floating"},ls=s("label",{for:"controlPassword",class:"form-label"},"Repeat password",-1),is={class:"modal-footer"},rs={type:"submit",class:"btn btn-success"};function ds(e,t,a,h,u,$){const b=_("ContentLoader");return l(),i("div",J,[s("div",K,[s("div",O,[Q,s("div",X,[s("form",{onSubmit:t[4]||(t[4]=E((...o)=>e.signup&&e.signup(...o),["prevent"]))},[s("div",Y,[m(s("input",{type:"username",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=o=>e.username=o),placeholder:"Username",required:""},null,512),[[p,e.username]]),ss]),s("div",es,[m(s("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=o=>e.email=o),placeholder:"Email address",required:""},null,512),[[p,e.email]]),ts]),s("div",os,[m(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[2]||(t[2]=o=>e.password=o),placeholder:"Password",required:""},null,512),[[p,e.password]]),as]),s("div",ns,[m(s("input",{type:"password",class:"form-control",id:"controlPassword","onUpdate:modelValue":t[3]||(t[3]=o=>e.controlPassword=o),placeholder:"Repeat password",required:""},null,512),[[p,e.controlPassword]]),ls]),s("div",is,[s("button",rs,[r(b,{loading:e.loading},{default:g(()=>[f(" Sign up ")]),_:1},8,["loading"])])])],32)])])])],512)}const cs=k(Z,[["render",ds]]),us=v({components:{ContentLoader:U,SignupModal:cs},setup(){return{store:w()}},data(){return{username:null,password:null,loading:!1}},methods:{async loginUser(){try{this.loading=!0,await z(this.username,this.password)}catch{this.store.addError("Invalid username or password"),this.loading=!1;return}finally{this.loading=!1}await W(),this.loading=!1;const e=this.$refs.loginModal;y.getInstance(e).hide()},setCredentials(e,t){const a=this.$refs.loginModal;y.getInstance(a).show(),this.username=e,this.password=t,this.loginUser()}}}),ms={id:"loginModal",ref:"loginModal",class:"modal fade",tabindex:"-1","aria-labelledby":"loginModalLabel","aria-hidden":"true"},ps={class:"modal-dialog"},hs={class:"modal-content"},bs=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"loginModalLabel"},"Sign in"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),gs={class:"modal-body"},_s={class:"mb-4 form-floating"},fs=["disabled"],vs=s("label",{for:"usernameInput",class:"form-label"},"Username",-1),ws={class:"mb-3 form-floating"},$s=["disabled"],ys=s("label",{for:"inputPassword",class:"form-label"},"Password",-1),ks=s("button",{type:"button",class:"btn btn-link","data-bs-target":"#signupModal","data-bs-toggle":"modal"}," Don't have an account? Sign up ",-1),Ms={class:"modal-footer"},Us={type:"submit",class:"btn btn-success"};function Cs(e,t,a,h,u,$){const b=_("ContentLoader"),o=_("SignupModal");return l(),i(M,null,[s("div",ms,[s("div",ps,[s("div",hs,[bs,s("form",{onSubmit:t[2]||(t[2]=E((...n)=>e.loginUser&&e.loginUser(...n),["prevent"]))},[s("div",gs,[s("div",_s,[m(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.username=n),type:"username",class:"form-control",id:"usernameInput","aria-describedby":"usernamelHelp",disabled:e.loading,placeholder:"Username",required:""},null,8,fs),[[p,e.username]]),vs]),s("div",ws,[m(s("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.password=n),type:"password",class:"form-control",id:"inputPassword",disabled:e.loading,placeholder:"Password",required:""},null,8,$s),[[p,e.password]]),ys]),ks]),s("div",Ms,[s("button",Us,[r(b,{loading:e.loading},{default:g(()=>[f(" Sign in ")]),_:1},8,["loading"])])])],32)])])],512),r(o,{id:"signupModal",onSignedUp:e.setCredentials},null,8,["onSignedUp"])],64)}const Ss=k(us,[["render",Cs]]),Vs={class:"container"},Ls=s("img",{src:H,alt:"Sun behind cloud",height:"50"},null,-1),Ps=s("button",{class:"navbar-toggler border-0 shadow-none",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1),Is={class:"collapse navbar-collapse",id:"navbarNavDropdown"},Es={class:"navbar-nav ms-auto"},Ns={key:0,class:"bi bi-house-fill"},xs={class:"nav-item"},Ws={key:0},qs={class:"nav-item dropdown"},As={class:"btn btn-no-outline nav-link dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Bs={key:1,class:"nav-item"},Ds=s("button",{class:"btn btn-no-outline nav-link text-uppercase",type:"button","data-bs-toggle":"modal","data-bs-target":"#loginModal","aria-expanded":"true"}," Sign in ",-1),Rs=[Ds],Ts=v({__name:"Nav",setup(e){const t=B(),a=w(),h=V(()=>t.currentRoute.value.path),u=V(()=>a.theme),$=n=>n===h.value;function b(){F("accesstoken"),a.currentUser=null}function o(n){document.documentElement.setAttribute("data-bs-theme",n),a.setTheme(n)}return N(()=>{o(localStorage.theme||"light")}),(n,C)=>{const S=_("router-link");return l(),i("div",{class:"navbar navbar-expand-lg border-bottom mb-4",style:A(c(a).theme==="light"?"background-color: azure":"background-color: indigo")},[s("nav",Vs,[r(S,{to:c(I)[0].path,class:"navbar-brand d-flex align-items-center"},{default:g(()=>[Ls,f(" World Wide Weather ")]),_:1},8,["to"]),Ps,s("div",Is,[s("ul",Es,[s("button",{class:"btn btn-no-outline nav-link text-uppercase",onClick:C[0]||(C[0]=d=>o(u.value==="light"?"dark":"light"))},[s("i",{class:L(u.value==="light"?"bi bi-moon-stars-fill":"bi bi-sun-fill")},null,2)]),(l(!0),i(M,null,q(c(I),d=>(l(),i("li",{class:"nav-item text-uppercase",key:d.path},[r(S,{to:d.path,class:L(["nav-link",{active:$(d.path)}]),title:d.children[0].name},{default:g(()=>[d.path==="/"?(l(),i("i",Ns)):x("",!0),f(" "+P(d.path!=="/"?d.children[0].name:""),1)]),_:2},1032,["to","title","class"])]))),128)),s("li",xs,[r(U,{loading:!c(a).currentUser&&c(G)("accesstoken")},{default:g(()=>[c(a).currentUser?(l(),i("li",Ws,[s("div",qs,[s("button",As,P(c(a).currentUser.username),1),s("ul",{class:"dropdown-menu"},[s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:b},"Sign out")])])])])):(l(),i("li",Bs,Rs))]),_:1},8,["loading"]),r(Ss)])])])])],4)}}}),zs={},Fs={class:"border-top py-3 d-flex justify-content-between align-items-center"},Gs=D('<section><a href="https://github.com/tordbm/WeatherApp-client" class="text-decoration-none" title="Wheather app by TordBM">tordbm</a><a href="https://github.com/tordbm/WeatherApp-client" class="text-decoration-none ms-1" title="Wheather App in Vue3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><g id="feGithub0" fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><g id="feGithub1" fill="currentColor"><path id="feGithub2" d="M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.476c0-.237-.013-1.024-.013-1.862c-2.512.463-3.162-.612-3.362-1.175c-.113-.288-.6-1.175-1.025-1.413c-.35-.187-.85-.65-.013-.662c.788-.013 1.35.725 1.538 1.025c.9 1.512 2.338 1.087 2.912.825c.088-.65.35-1.087.638-1.337c-2.225-.25-4.55-1.113-4.55-4.938c0-1.088.387-1.987 1.025-2.688c-.1-.25-.45-1.275.1-2.65c0 0 .837-.262 2.75 1.026a9.28 9.28 0 0 1 2.5-.338c.85 0 1.7.112 2.5.337c1.912-1.3 2.75-1.024 2.75-1.024c.55 1.375.2 2.4.1 2.65c.637.7 1.025 1.587 1.025 2.687c0 3.838-2.337 4.688-4.562 4.938c.362.312.675.912.675 1.85c0 1.337-.013 2.412-.013 2.75c0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10Z"></path></g></g></svg></a></section>',1),js=[Gs];function Hs(e,t){return l(),i("div",Fs,js)}const Zs=k(zs,[["render",Hs]]),Js={class:"container flex-shrink-0 mb-4 mt-4"},Ks={class:"container footer mb-2 mt-auto"},Xs=v({__name:"Default",setup(e){const{errorsList:t}=w();return N(()=>{W()}),(a,h)=>{const u=_("RouterView");return l(),i(M,null,[r(Ts),c(t).length>0?(l(),R(j,{key:0})):x("",!0),s("main",Js,[r(u)]),s("footer",Ks,[r(Zs)])],64)}}});export{Xs as default};
